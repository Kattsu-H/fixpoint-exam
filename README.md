# 開発環境

- Windows 10
- Ptyhon 3.9.8
  - click 8.0.4
  - pytest 7.0.1

# 説明

## 事前準備

click を使用しているため、事前に click をインストールしてください。

```
pip install click
```

## 実行方法

### 設問 1

以下のコマンドを実行します。

```
python check_status.py q1 path/to/logfile
```

サーバの故障期間を以下のフォーマットで標準出力します。

```
[SERVER_DOWN] <IPアドレス>: <タイムアウト開始時間> - <タイムアウト終了時間>
```

なお、各サーバの初回の ping がタイムアウトした場合は、その時刻を故障開始時間とします。また、各サーバの最後の ping がタイムアウトした場合、その時刻を復旧時間とします。

### 設問 2

以下のコマンドを実行します。

```
python check_status.py q2 path/to/logfile N
```

サーバの故障期間を以下のフォーマットで標準出力します。

```
[SERVER_DOWN] <IPアドレス>: <タイムアウト開始時間> - <タイムアウト終了時間>
```

なお、各サーバの初回の ping がタイムアウトした場合は、その時刻を故障開始時間とします。また、各サーバの最後の ping がタイムアウトした場合、その時刻を復旧時間とします。

### 設問 3

以下のコマンドを実行します。

```
python check_status.py q3 path/to/logfile N m t
```

サーバの故障期間を以下のフォーマットで標準出力します。

```
[SERVER_DOWN] <IPアドレス>: <タイムアウト開始時間> - <タイムアウト終了時間>
```

サーバの高負荷状態は以下のフォーマットで標準出力します。

```
[SERVER_OVERLOAD] <IPアドレス>: <高負荷開始時間> - <高負荷終了時間>
```

なお、各サーバの初回の ping がタイムアウトした場合は、その時刻を故障開始時間とします。また、各サーバの最後の ping がタイムアウトした場合、その時刻を復旧時間とします。高負荷状態も同様です。高負荷状態の判定については、ログのレコードが m 件に満たない場合はそれまでの平均応答時間で判定します。また、ping がタイムアウトした場合は平均の計算に含みません。

### 設問 4

以下のコマンドを実行します。

```
python check_status.py q4 path/to/logfile N m t
```

サーバの故障期間を以下のフォーマットで標準出力します。

```
[SERVER_DOWN] <IPアドレス>: <タイムアウト開始時間> - <タイムアウト終了時間>
```

サーバの高負荷状態は以下のフォーマットで標準出力します。

```
[SERVER_OVERLOAD] <IPアドレス>: <高負荷開始時間> - <高負荷終了時間>
```

サブネットのタイムアウトは以下のフォーマットで標準出力します。

```
[SUBNET_DOWN] <ネットワークIPアドレス>: <タイムアウト開始時間> - <タイムアウト終了時間>
```

なお、各サーバの初回の ping がタイムアウトした場合は、その時刻を故障開始時間とします。また、各サーバの最後の ping がタイムアウトした場合、その時刻を復旧時間とします。高負荷状態、サブネットのタイムアウトも同様です。高負荷状態の判定については、ログのレコードが m 件に満たない場合はそれまでの平均応答時間で判定します。また、ping がタイムアウトした場合は平均の計算に含みません。

# テスト

## 事前準備

pytest を使用するため、pytest をインストールしてください。

```
pip install pytest
```

## テスト実行方法

以下のコマンドを実行します。

```
pytest
```

以下の結果が得られます。

```
=================================== test session starts ===================================
platform win32 -- Python 3.9.8, pytest-7.0.1, pluggy-1.0.0
rootdir: C:\****\****\fixpoint-exam
collected 4 items

test\test_question1.py .                                                             [ 25%]
test\test_question2.py .                                                             [ 50%]
test\test_question3.py .                                                             [ 75%]
test\test_question4.py .                                                             [100%]

==================================== 4 passed in 0.16s ====================================

```
